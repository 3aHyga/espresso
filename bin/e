#!/usr/bin/env ruby
require 'fileutils'

espresso_root = File.expand_path('../..', __FILE__) + '/'

$:.unshift espresso_root + 'lib'
require 'e'
require 'e-more/generator'

generator = EspressoProjectGenerator.new(espresso_root + 'app/', Dir.pwd)

if op = $*[0]
  if op =~ /\Ag\:/
    if op =~ /p/

      generator.generate_project $*[1]
      exit 0
    else
      if op =~ /c/
        
        generator.generate_controller $*[1], $*[2]
        exit 0
      end

      if op =~ /r/

        generator.generate_route $*[1], $*[2], *$*[2..-1]
        exit 0
      end
    end
  end
end

require "rack"
Rack::Server.start
